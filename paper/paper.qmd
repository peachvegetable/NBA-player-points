---
title: "My title"
subtitle: "My subtitle if needed"
author: 
  - Yihang  Cai
thanks: "Code and data are available at: https://github.com/peachvegetable/NBA-player-points"
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

### work space setup ###
library(tidyverse)
library(arrow)
library(tidymodels)
library(modelsummary)
library(ggplot2)
```


# Introduction

You can and should cross-reference sections and sub-sections. We use @citeR and @rohan.

The remainder of this paper is structured as follows. @sec-data....



# Data {#sec-data}

Some of our data is of penguins (@fig-bills), from @palmerpenguins.


Talk more about it.

And also planes (@fig-planes). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)


Talk way more about it. 



# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.

```{r}
predictions <- predict(second_lasso_model, test_data)
results <- bind_cols(test_data, predictions)
# Calculate RMSE
rmse_results_2 <- rmse(results, truth = pts, estimate = .pred)
rsq_results_2 <- rsq(results, truth = pts, estimate = .pred)
```


# Results

Our results are summarized in @tbl-modelresults.







# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}

```{r}
analysis_data <- read_parquet("../data/analysis_data/analysis_data.parquet")

predictors <- c("g", "gs", "mp", "fg_percent", "x3p_percent", 
                "x2p_percent", "e_fg_percent", "ft_percent", 
                "orb", "drb", "trb", "ast", "stl", "blk", "tov", "pf")

for (predictor in predictors) {
  p <- ggplot(analysis_data, aes_string(x = predictor, y = "pts")) + 
    geom_point(alpha = 0.5) + 
    geom_smooth(method = "lm", se = FALSE, color = "blue") + 
    ggtitle(paste("Points vs", predictor)) +
    theme_minimal()
  
  print(p)
}
```



# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 


## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...





\newpage


# References


